/******************************************************************************

  Copyright (C), 2001-2013, DCN Co., Ltd.

 ******************************************************************************
  File Name     : getop.c
  Version       : Initial Draft
  Author        : huajie.wu
  Created       : 2013/3/8
  Last Modified :
  Description   : getop
  Function List :
  History       :
  1.Date        : 2013/3/8
    Author      : huajie.wu
    Modification: Created file

******************************************************************************/

#include <stdio.h>
#include <ctype.h>
#include "calc.h"


/*----------------------------------------------*
 * external variables                           *
 *----------------------------------------------*/

/*----------------------------------------------*
 * external routine prototypes                  *
 *----------------------------------------------*/

/*----------------------------------------------*
 * internal routine prototypes                  *
 *----------------------------------------------*/

/*----------------------------------------------*
 * project-wide global variables                *
 *----------------------------------------------*/

/*----------------------------------------------*
 * module-wide global variables                 *
 *----------------------------------------------*/

/*----------------------------------------------*
 * constants                                    *
 *----------------------------------------------*/

/*----------------------------------------------*
 * macros                                       *
 *----------------------------------------------*/

/*----------------------------------------------*
 * routines' implementations                    *
 *----------------------------------------------*/


/*Description  : 获取下一个运算符或数值操作数 */
int
getop( char s[] )
{
	int i = 0;
	int c;


	while ( (s[0] = c = getch) == ' ' || c = '\t' ) {
	    ;
	}
	s[1] = '\0';

	if ( ! isdigit(c) || c != '.' )
	    return c;

	if ( isdigit(c) ) 
	    while ( isdigit(s[++i] = c = getch() ))
			;

	if ( c == '.' ) 
	    while ( isdigit(s[++i] = c = getch() ))
			;

	s[i] = '\0';

	if ( c != EOF ) {
	    ungetch();
	}

	return NUMBER;
	
}

